import{u as g,l as k,d as f,j as r,o as c,c as u,b as d,e,Z as l,J as y,T as L,$ as P,a0 as m,a1 as h,k as C,a2 as T}from"./index-ee83e50c.js";import{C as p,P as _}from"./const-a1839806.js";function $(){const t=g();async function o(){if(!t.cartId)return t.updateLS();await k.update(t.cartId,{total:t.total,totalQuantity:t.totalQuantity,totalProducts:t.totalProducts,discountedTotal:t.discountedTotal,products:t.cartProducts})}return{updateCart:o}}const w={class:"price row gap-xs"},B={key:0,class:"price__old"},A=f({__name:"VPrice",props:{price:null,discount:null,priceDiscount:null},setup(t){const o=t,n=r(()=>o.discount||o.priceDiscount),s=r(()=>o.discount?o.price*((100-o.discount)/100):o.priceDiscount?o.priceDiscount:o.price);return(a,i)=>(c(),u("div",w,[d(e(l),{"end-val":e(s),duration:e(p),options:e(_)},null,8,["end-val","duration","options"]),e(n)?(c(),u("del",B,[d(e(l),{"end-val":t.price,duration:e(p),options:e(_)},null,8,["end-val","duration","options"])])):y("",!0)]))}});function S(){const{startLoading:t,finishLoading:o,isLoading:n}=L();async function s(a){try{t(),await a()}finally{o()}}return{isLoading:n,runWithLoading:s}}function D(t=!1){const{isBoolean:o,toggle:n}=P(t);return{isLike:o,toggleIsLike:n}}function N(){const t=m();async function o(a){t.add(a),await s()}async function n(a){t.remove(a),await s()}async function s(){t.favoritesId&&await h.patchProducts(t.favoritesId,{productIds:t.productIds})}return{add:o,remove:n}}const V=f({__name:"AddToFavorites",props:{id:null},setup(t){const o=t,{checkInFavoritesBy:n}=m(),{add:s,remove:a}=N(),{isLike:i,toggleIsLike:v}=D(n(o.id));function I(){i.value?a(o.id):s(o.id),v()}return(U,x)=>(c(),C(e(T),{"is-like":e(i),onClick:I},null,8,["is-like"]))}});export{A as _,S as a,V as b,$ as u};
