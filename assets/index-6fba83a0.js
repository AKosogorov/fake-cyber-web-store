import{ad as P,D as b,d as C,v as w,y as S,C as y,o as d,k as f,w as M,b as u,e,ai as v,c as D,a as l,aj as x,J as $,G as R}from"./index-ee83e50c.js";import{_ as U}from"./UserBadge.vue_vue_type_script_setup_true_lang-c17a35fa.js";import{_ as k}from"./VInfo.vue_vue_type_script_setup_true_lang-44e2e15e.js";import{_ as E}from"./ModalForm.vue_vue_type_script_setup_true_lang-6999b9e3.js";import{t as V,a as G}from"./vee-validate-yup.esm-29c26862.js";import{_ as q,a as F}from"./VeeInputUsername.vue_vue_type_script_setup_true_lang-5abc8ee3.js";import{u as I}from"./VInput.vue_vue_type_script_setup_true_lang-4bdfbe48.js";import"./BaseModal.vue_vue_type_script_setup_true_lang-a2f9fe03.js";import"./CyberButtonSubmit.vue_vue_type_script_setup_true_lang-4f4e50ab.js";import"./CyberButton.vue_vue_type_script_setup_true_lang-c83485c6.js";import"./VRadio.vue_vue_type_script_setup_true_lang-6e27a624.js";import"./VeeInput.vue_vue_type_script_setup_true_lang-9c362fc0.js";const N={username:()=>P().required().min(3).max(50),gender:()=>b().required()},O=C({__name:"ChangeUsername",props:{username:null},emits:["close"],setup(c,{emit:s}){const o=c;function n(){s("close")}const{showError:r}=w(),t=S(),_=V(b({username:N.username()})),{handleSubmit:i,isSubmitting:m}=G({validationSchema:_,initialValues:{username:o.username}}),h=i(async p=>{try{const{data:a}=await y.patchUsername(t.user.id,p);t.user.username=a.username,n()}catch(a){r(a.message)}});return(p,a)=>(d(),f(e(E),{"is-submitting":e(m),"handler-submit":e(h),onClose:n},{default:M(()=>[u(e(q))]),_:1},8,["is-submitting","handler-submit"]))}}),T=C({__name:"ChangeGender",props:{gender:null},emits:["close"],setup(c,{emit:s}){const o=c;function n(){s("close")}const{showError:r}=w(),t=S(),_=V(b({gender:N.gender()})),{handleSubmit:i,isSubmitting:m}=G({validationSchema:_,initialValues:{gender:p(o.gender)}}),h=i(async a=>{try{const g={gender:a.gender.value},{data:B}=await y.patchGender(t.user.id,g);t.user.gender=B.gender,n()}catch(g){r(g.message)}});function p(a){return a==="male"?v[0]:v[1]}return(a,g)=>(d(),f(e(E),{"is-submitting":e(m),"handler-submit":e(h),onClose:n},{default:M(()=>[u(e(F))]),_:1},8,["is-submitting","handler-submit"]))}});function j(){const{value:c,setValue:s}=I("");function o(r){s(r)}function n(){s("")}return{isModal:c,openModal:o,closeModal:n}}const A={class:"container"},J=l("h1",{class:"mb-s"},"Profile",-1),z={class:"column gap-xs"},H={class:"flex gap-s"},K={class:"row gap-s"},L={class:"row gap-s"},ie=C({__name:"ProfilePage",setup(c){const s=S(),{isModal:o,openModal:n,closeModal:r}=j(),t={username:"username",gender:"gender"};return(_,i)=>(d(),D(R,null,[l("div",A,[J,l("div",z,[l("div",H,[u(e(U),{user:e(s).user},null,8,["user"]),u(e(x),{onClick:i[0]||(i[0]=m=>e(n)(t.username))})]),l("div",K,[u(e(k),{label:"Email",txt:e(s).user.email},null,8,["txt"])]),l("div",L,[u(e(k),{label:"Gender",txt:e(s).user.gender},null,8,["txt"]),u(e(x),{onClick:i[1]||(i[1]=m=>e(n)(t.gender))})])])]),e(o)===t.username?(d(),f(e(O),{key:0,username:e(s).user.username,onClose:e(r)},null,8,["username","onClose"])):$("",!0),e(o)===t.gender?(d(),f(e(T),{key:1,gender:e(s).user.gender,onClose:e(r)},null,8,["gender","onClose"])):$("",!0)],64))}});export{ie as default};
